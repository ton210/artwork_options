/**
 * MunchMakers Custom Request - Public Facing Styles
 * Version: 1.2.0 (Corresponds to plugin version with inline form and header button)
 *
 * Styles for:
 * 1. The [munchmakers_button] shortcode output (black & green).
 * 2. The [munchmakers_header_button] shortcode output.
 * 3. The popup request form.
 * 4. The inline request form on the tracker page.
 * 5. The [mcr_request_tracker] customer status page.
 */

/* --- General Request Button Styles (Shared by button shortcodes) --- */
.mcr-request-button,
.mcr-header-request-button {
    display: inline-flex !important;
    align-items: center;
    justify-content: center;
    gap: 8px;
    text-align: center;
    text-decoration: none !important;
    text-shadow: none;
    cursor: pointer;
    border: none;
    line-height: normal !important;
    box-sizing: border-box !important;
    transition: background-color .25s ease, transform .2s ease, box-shadow .25s ease !important;
    vertical-align: middle !important;
    font-family: "Poppins", Arial, Helvetica, sans-serif; /* Default from your theme example */
    font-weight: 600;
    text-transform: uppercase;
    -webkit-font-smoothing: antialiased;
    padding: 10px 15px !important;
    margin: 5px; /* Basic margin for spacing when inline */
}
.mcr-request-button:hover,
.mcr-header-request-button:hover {
    transform: translateY(-1px);
}

/* --- [munchmakers_button] Specific Styles (Product Page Button) --- */
.mcr-request-button {
    min-height: 42px;
    font-size: 15px;
    padding: 12px 28px !important;
    min-width: 230px;
    position: relative; /* For tooltip */
}

/* Black Button Style ([munchmakers_button color="black"] or default) */
.mcr-request-button.mcr-button-black {
    background-color: #221e1f !important;
    color: #ffffff !important;
    border-radius: 30px !important;
    box-shadow: inset 0 -2px 0 rgba(0, 0, 0, .15) !important;
}
.mcr-request-button.mcr-button-black:hover {
    background-color: #333333 !important;
    box-shadow: inset 0 -2px 0 rgba(0, 0, 0, .25) !important;
}

/* Green Button Style ([munchmakers_button color="green"]) */
.mcr-request-button.mcr-button-green {
    background-color: #93BC48 !important; /* Your specified green */
    color: #ffffff !important;
    border-radius: 30px !important;
    box-shadow: inset 0 -2px 0 rgba(0,0,0,0.15) !important;
}
.mcr-request-button.mcr-button-green:hover {
    background-color: #82a83e !important; /* Slightly darker green */
    box-shadow: inset 0 -2px 0 rgba(0,0,0,0.25) !important;
}

/* Tooltip Styles for [munchmakers_button] */
.mcr-request-button[data-tooltip]:hover::after,
.mcr-request-button[data-tooltip]:hover::before {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(-6px);
}
.mcr-request-button[data-tooltip]::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%) translateY(0);
    background-color: #333;
    color: #fff;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 13px;
    line-height: 1.4;
    font-weight: normal;
    text-transform: none;
    white-space: normal;
    min-width: 280px;
    max-width: 320px;
    text-align: left;
    z-index: 1000000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out, visibility 0.2s ease-in-out;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    margin-bottom: 10px;
}
.mcr-request-button[data-tooltip]::before {
    content: '';
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%) translateY(0);
    border-width: 6px;
    border-style: solid;
    border-color: #333 transparent transparent transparent;
    z-index: 1000001;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out, visibility 0.2s ease-in-out;
    margin-bottom: -2px;
}

/* --- [munchmakers_header_button] Specific Styles --- */
.mcr-header-request-button {
    background-color: #231F20 !important; /* Dark background from image */
    color: #FFFFFF !important;
    padding: 10px 18px !important; /* Adjusted padding for header */
    border-radius: 6px !important; /* Subtle rounding */
    font-size: 14px !important;
    font-weight: 500 !important;
    text-transform: none !important; /* As per image example */
    letter-spacing: 0.3px;
    min-width: auto; /* Allow it to be smaller than product page button */
    box-shadow: 0 2px 5px rgba(0,0,0,0.15) !important;
}
.mcr-header-request-button:hover {
    background-color: #3a3637 !important; /* Slightly lighter for hover */
    box-shadow: 0 3px 7px rgba(0,0,0,0.2) !important;
}
.mcr-header-button-icon svg {
    width: 1.1em;
    height: 1.1em;
    vertical-align: -0.15em;
    margin-right: 8px;
    fill: currentColor;
}

/* --- Popup Styles --- */
.mcr-popup-overlay {
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background-color:rgba(0,0,0,.75);
    z-index:999999 !important;
    display: none !important;
    align-items:center;
    justify-content:center;
    opacity:0;
    transition:opacity .3s ease-in-out;
}
.mcr-popup-overlay.active {
    display:flex !important;
    opacity:1 !important;
    visibility:visible !important;
}
.mcr-popup-container {
    background-color:#fff;
    padding:25px 30px;
    border-radius:12px;
    box-shadow:0 10px 30px rgba(0,0,0,.15);
    width:90%;
    max-width:580px;
    position:relative;
    max-height:90vh;
    overflow-y:auto;
    transform: translateY(-20px) scale(0.95);
    transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.3s ease-in-out;
    opacity: 0;
}
.mcr-popup-overlay.active .mcr-popup-container {
    transform: translateY(0) scale(1);
    opacity: 1;
}
.mcr-popup-title {
    margin-top:0;
    margin-bottom:15px;
    font-size:clamp(1.5em, 4vw, 1.8em);
    color:#2d3748;
    text-align:center;
    font-weight:600;
    line-height: 1.3;
}
.mcr-popup-instructions {
    background-color: #f0f7ff;
    border-left: 4px solid #7354ef;
    padding: 15px 20px;
    margin-bottom: 25px;
    border-radius: 0 4px 4px 0;
    font-size: 0.95em;
    line-height: 1.5;
    color: #2d3748;
}
.mcr-popup-instructions p { margin: 0; }
.mcr-popup-close-btn {
    position:absolute;
    top:10px;
    right:10px;
    background:transparent;
    border:none;
    font-size:32px;
    line-height:1;
    color:#A0AEC0;
    cursor:pointer;
    padding:8px;
    transition:color .2s ease;
}
.mcr-popup-close-btn:focus,.mcr-popup-close-btn:hover { color:#4A5568; outline:0 }
.mcr-form-field { margin-bottom:20px; }
.mcr-form-field label { display:block; margin-bottom:8px; font-weight:500; color:#4A5568; font-size: 0.95em; }
.mcr-form-field input[type=email],
.mcr-form-field input[type=file],
.mcr-form-field input[type=tel],
.mcr-form-field input[type=text],
.mcr-form-field textarea {
    width:100%;
    padding:12px 15px;
    border:1px solid #CBD5E0;
    border-radius:6px;
    box-sizing:border-box;
    font-size:1em;
    color:#2D3748;
    transition:border-color .2s ease,box-shadow .2s ease;
    background-color: #F7FAFC;
}
.mcr-form-field input[type=file] { padding: 8px 10px; background-color: transparent; }
.mcr-form-field input[type=file]::-webkit-file-upload-button { background-color:#EDF2F7; color:#4A5568; border: none; padding: 8px 15px; border-radius:4px; cursor:pointer; margin-right:10px; transition:background-color .2s ease; font-weight: 500; }
.mcr-form-field input[type=file]::-webkit-file-upload-button:hover { background-color:#E2E8F0; }
.mcr-form-field input[type=email]:focus,
.mcr-form-field input[type=tel]:focus,
.mcr-form-field input[type=text]:focus,
.mcr-form-field textarea:focus { border-color:#7354EF; box-shadow:0 0 0 3px rgba(115, 84, 239, 0.2); outline:0; background-color: #fff; }
.mcr-form-field textarea {min-height:120px; resize:vertical;}
.mcr-form-field .mcr-required {color:#e53e3e; font-weight:bold; margin-left:3px;}
.mcr-form-field small { display:block; margin-top:6px; font-size:.85em; color:#718096;}
.mcr-form-submit {text-align:center; margin-top:30px;}
.mcr-submit-button { /* Submit button inside popup or inline form */
    padding:14px 30px;
    font-size:1.1em;
    font-weight:600;
    background-color:#93BC48; /* MunchMakers Green */
    color:#fff !important;
    border:none;
    border-radius:8px;
    cursor:pointer;
    transition: background-color 0.2s ease, transform 0.1s ease;
    width: 100%;
}
.mcr-submit-button:hover:not(:disabled) { background-color:#82a83e; transform:translateY(-1px); }
.mcr-submit-button:disabled {background-color:#CBD5E0; cursor:not-allowed;}
.mcr-form-messages {padding:12px 15px;margin-bottom:20px;border-radius:6px;text-align:center; font-size:.95em; border-width:1px; border-style:solid;}
.mcr-form-messages.success {background-color:#C6F6D5;color:#2F855A; border-color:#9AE6B4;}
.mcr-form-messages.error {background-color:#FED7D7;color:#C53030; border-color:#FEB2B2;}
.mcr-spinner {display:inline-block;width:18px;height:18px;border:3px solid hsla(0,0%,100%,.3);border-radius:50%;border-top-color:#fff;animation:mcr-spin .8s linear infinite;margin-left:8px;vertical-align:middle}
@keyframes mcr-spin{to{transform:rotate(360deg)}}

/* --- Inline Form Styles (on Tracker Page) --- */
.mcr-inline-form-wrapper {
    max-width: 700px; /* Or your desired width for the form on the page */
    margin: 40px auto;
    padding: 30px;
    background-color: #fff;
    border-radius: 12px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.08);
}
.mcr-inline-form-title {
    margin-top:0;
    margin-bottom:15px;
    font-size:clamp(1.6em, 4.5vw, 2em);
    color:#2d3748;
    text-align:center;
    font-weight:600;
    line-height: 1.3;
    padding-bottom: 15px;
    border-bottom: 1px solid #E2E8F0;
}
.mcr-inline-form-instructions { /* Styles for instructional text within inline form */
    background-color: #E9D8FD; /* Light purple accent */
    border-left: 4px solid #7354ef;
    padding: 15px 20px;
    margin-top: 10px; /* Space above if title is present */
    margin-bottom: 25px;
    border-radius: 0 4px 4px 0;
    font-size: 1em; /* Slightly larger for page context */
    line-height: 1.6;
    color: #4A2D84; /* Darker purple text */
}
.mcr-inline-form-instructions p { margin: 0; }


/* --- Customer Tracker Page Styles --- */
.mcr-tracker-wrap{max-width:800px;margin:40px auto;padding:0 15px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";color:#4A5568}
.mcr-tracker-header{text-align:center;margin-bottom:40px}
.mcr-tracker-header h1{font-size:clamp(1.8rem, 5vw, 2.5rem);margin-bottom:10px;color:#2D3748; font-weight:700;}
.mcr-tracker-intro{font-size:clamp(1rem, 4vw, 1.2rem);color:#718096;line-height:1.5;}
.mcr-tracker-container{padding:20px 0;margin-bottom:40px}
.mcr-tracker-bar{display:flex;justify-content:space-between;position:relative;flex-wrap:nowrap;}
.mcr-tracker-bar::before{content:'';position:absolute;top:25px;left:5%;right:5%;height:4px;background-color:#E2E8F0;transform:translateY(-50%);z-index:1}
.mcr-tracker-step{position:relative;z-index:2;text-align:center;color:#A0AEC0;width:auto; flex: 1; display: flex; flex-direction: column; align-items: center; padding: 0 5px;}
.mcr-tracker-icon{width:50px;height:50px;border-radius:50%;background-color:#fff;border:4px solid #E2E8F0;display:flex;align-items:center;justify-content:center;margin:0 auto 10px;font-size:24px;transition:all .4s ease}
.mcr-tracker-label{font-weight:600;font-size:clamp(0.8rem, 2.5vw, 0.9rem);transition:all .4s ease;line-height:1.3;}
.mcr-tracker-step.active .mcr-tracker-icon,.mcr-tracker-step.completed .mcr-tracker-icon{border-color:#68D391;background-color:#68D391;color:#fff} /* Softer Green */
.mcr-tracker-step.active .mcr-tracker-label{color:#2D3748; font-weight:700;}
.mcr-tracker-step.completed .mcr-tracker-label{color:#4A5568}
.mcr-tracker-step.active .mcr-tracker-icon{transform:scale(1.1);box-shadow:0 0 0 8px rgba(104, 211, 145, 0.2)}
.mcr-tracker-step.disabled .mcr-tracker-icon { border-color: #E2E8F0; background-color: #F7FAFC; color: #A0AEC0; }
.mcr-tracker-step.disabled .mcr-tracker-label { color: #A0AEC0; }
.mcr-tracker-details-grid{display:grid;grid-template-columns:1fr;gap:30px; margin-top:30px;}
.mcr-tracker-details-grid[data-columns="2"] { grid-template-columns:repeat(auto-fit, minmax(300px, 1fr)); }
.mcr-tracker-details-card{background:#FFFFFF;border-radius:12px;padding:25px 30px;border:1px solid #E2E8F0;box-shadow: 0 4px 12px rgba(0,0,0,0.05);}
.mcr-tracker-details-card h2{margin-top:0;border-bottom:1px solid #E2E8F0;padding-bottom:15px;margin-bottom:20px;font-size:1.6em; color:#2D3748;}
.mcr-tracker-details-card p{line-height:1.7;margin:0 0 12px; color: #4A5568;}
.mcr-tracker-details-card hr{border:0;border-top:1px solid #E2E8F0;margin:25px 0}
.mcr-request-content{background:#F7FAFC;padding:15px;border-radius:6px;border:1px solid #E2E8F0; margin-top:10px; max-height:300px; overflow-y:auto;}
.mcr-tracker-image-preview{width:100%;max-width: 400px; height:auto; border-radius:8px;border:1px solid #CBD5E0; margin-top:10px; display:block; box-shadow: 0 2px 4px rgba(0,0,0,0.05);}
.mcr-tracker-footer{text-align:center;margin-top:50px;padding-top:30px;border-top:1px solid #E2E8F0;color:#718096; font-size:0.9em;}
.mcr-tracker-error-message { text-align:center; font-size:1.2em; color: #C53030; background-color: #FFF5F5; padding:20px; border-radius:8px; border: 1px solid #FC8181; }
